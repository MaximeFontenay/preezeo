---
export interface Props {
	src: string;
	alt: string;
	display?: 'block' | 'inline';
    contentVisibility?: boolean;
    cover?: boolean;
    lazyLoading?: boolean;
	fetchPriority?: boolean;
}

const { contentVisibility, src, alt, display = 'block', cover = false, lazyLoading = true, fetchPriority = false } = Astro.props;
---

<img 
    class:list={[cover ? 'object-cover' : 'object-contain', display, contentVisibility ? 'visibility' :  '']}
    src={src} 
    alt={alt}
    loading={lazyLoading ? 'lazy' : 'eager'}
    fetchpriority={fetchPriority ? 'high' : 'auto'}
    draggable="false"
    decoding="async"
>

<style lang="scss">
img {
    display: block;
    width: 100%;
    height: 100%;

    &.visibility {
        content-visibility: auto;
        contain-intrinsic-size: auto 800px;
    }
}
</style>
