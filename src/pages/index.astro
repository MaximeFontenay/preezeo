---
import Image from "../components/atom/Image.astro";
import Layout from "../layouts/Layout.astro";
import ButtonContact from '../components/ButtonContact.astro';
import Modale from '../components/Modale.vue';


const contentType : {
    value: string,
    text: string,
    content: string,
    illustrations: [string, string, string]
}[] = [
    {
        value: "particulier",
        text: "Particulier",
        content: `
        <span class="text-yellow">Le crédit d’impôt</span> pour la transition énergétique permet aux propriétaires et locataires d’une résidence principale de déduire jusqu’à <span class="text-yellow">500 euros</span> des dépenses liées à l’acquisition d’une borne de recharge pour véhicules électriques installée à domicile par un <span class="text-yellow">technicien qualifié IRVE</span>.
        Depuis le 1er janvier 2023, <span class="text-yellow">la TVA à 5,5% a été entendue</span> et est désormais disponible pour tous les logements. L’attestation de TVA, permettant de confirmer que le bâtiment est achevé depuis plus de 2 ans, n’est donc plus nécessaire. 
        `,
        illustrations: [
            '/img/illu/particulier-1.svg',
            '/img/illu/particulier-2.svg',
            '/img/illu/particulier-3.svg',
        ]
    },
    {
        value: "copropriete",
        text: "Copropriété",
        content: `
        Le montant <span class="text-yellow">maximal d’aide versée</span> est fixé pour les infrastructures collectives (hors travaux de voirie extérieur) à 4000 euros jusqu’à 50 places. <span class="text-yellow">Augmenté de 75 euros par place supplémentaire</span>. 
        Dans la limité de 15 000 euros au total par copropriété.
        `,
        illustrations: [
            '/img/illu/copropriete-1.svg',
            '/img/illu/copropriete-2.svg',
            '/img/illu/copropriete-3.svg',
        ]
    },
    {
        value: "professionnel",
        text: "Professionnel",
        content: `
        Le montant <span class="text-yellow">maximal d’aide versée</span> est fixé pour les infrastructures collectives (hors travaux de voirie extérieur) à 4000 euros jusqu’à 50 places. <span class="text-yellow">Augmenté de 75 euros par place supplémentaire</span>. 
        Dans la limité de 15 000 euros au total par copropriété.
        `,
        illustrations: [
            '/img/illu/professionnel-1.svg',
            '/img/illu/professionnel-2.svg',
            '/img/illu/professionnel-3.svg',
        ]
    },
]

--- 

<script>

const productTypeButtons = document.querySelectorAll('[data-toggle-product-type]');
const productTypeArticles = document.querySelectorAll(`[data-product-type-value]`);

productTypeButtons[0].classList.add('active');
productTypeArticles[0].classList.remove('hidden');


productTypeButtons.forEach((button) => {
    button.addEventListener('click', () => {
        const productType = button.getAttribute('data-toggle-product-type');

        productTypeButtons.forEach((button) => {
            button.classList.remove('active');
        });
        
        button.classList.add('active');

        productTypeArticles.forEach((article) => {
            const articleProductType = article.getAttribute('data-product-type-value');

            if (articleProductType === productType) {
                article.classList.remove('hidden');
            } else {
                article.classList.add('hidden');
            }
        });
    });
});

</script>

<Layout title="Preezeo la borne qu'il vous faut !">
    <section class="container mt-6 lg:mt-10 max-md:px-[5%]">
        
        <div class="flex items-stretch justify-between max-md:flex-col gap-12">
            <h2 class="paragraphe max-w-[500px] md:flex-1 md:w-1/2 max-md:w-full">
                Labélisé Qualifelec, <span class="text-yellow">Preezeo</span> intervient dans toute la France métropolitaine afin d’installer et de maintenir vos <span class="text-yellow">bornes de recharge</span> pour véhicules électriques. 
                Nous vous assurons un service de qualité effectué par des électriciens <span class="text-yellow">professionnels agréés IRVE</span>.
            </h2>

            <div class="hero-animation-container max-w-[600px] md:flex-1 md:w-1/2 max-md:w-full">
                <Image 
                    c="hero-animation hero-first lg:h-[300px]"
                    src="/img/illu/hero.svg"
                    alt=""
                    fetchPriority={true}
                />
                <Image 
                    c="hero-animation hero-second lg:h-[300px]"
                    src="/img/illu/hero2.svg"
                    alt=""
                    fetchPriority={true}
                />
            </div>
        </div>

    </section>
    

    <section class="overflow-x-clip max-w-full lg:mx-auto">
        <div class="card-scroller flex justify-start items-stretch gap-8 w-full overflow-x-scroll overflow-y-clip pb-8 snap-x snap-mandatory snap-always px-[5%]">

            <a href="#" class="card">
                <div class="absolute z-[-1] h-full w-full left-4">
                    <Image src="/img/illu/card-illu-1.svg" alt="" />
                </div>
                <div class="card__overlay">
                    <h2 class="font-montserrat font-black h-[2em] tracking-2 text-2xl mb-4">Guide irve</h2>
                    <p class="font-medium leading-snug text-lg">Tout savoir sur ces nouveaux installateurs</p>
                    <svg class="absolute bottom-4 right-4" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.7241 9.04262C15.1241 8.66175 15.1396 8.02877 14.7587 7.62883L8.55205 1.11133C8.17118 0.711383 7.53821 0.695919 7.13826 1.07679C6.73831 1.45766 6.72285 2.09063 7.10372 2.49058L12.6207 8.28391L6.82739 13.8009C6.42745 14.1818 6.41198 14.8148 6.79285 15.2147C7.17372 15.6147 7.8067 15.6301 8.20664 15.2492L14.7241 9.04262ZM0.975576 8.9997L14.0101 9.31815L14.0589 7.31875L1.02442 7.0003L0.975576 8.9997Z" fill="white"/>
                    </svg>
                </div>
            </a>

            <a href="#" class="card">
                <div class="absolute z-[-1] h-full w-full left-0 -top-4">
                    <Image src="/img/illu/card-illu-2.svg" alt="" />
                </div>
                <div class="card__overlay">
                    <h2 class="font-montserrat font-black h-[2em] tracking-2 text-2xl mb-4">Aides & subventions</h2>
                    <p class="font-medium leading-snug text-lg">Des solutions adaptées à votre budget</p>
                    <svg class="absolute bottom-4 right-4" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.7241 9.04262C15.1241 8.66175 15.1396 8.02877 14.7587 7.62883L8.55205 1.11133C8.17118 0.711383 7.53821 0.695919 7.13826 1.07679C6.73831 1.45766 6.72285 2.09063 7.10372 2.49058L12.6207 8.28391L6.82739 13.8009C6.42745 14.1818 6.41198 14.8148 6.79285 15.2147C7.17372 15.6147 7.8067 15.6301 8.20664 15.2492L14.7241 9.04262ZM0.975576 8.9997L14.0101 9.31815L14.0589 7.31875L1.02442 7.0003L0.975576 8.9997Z" fill="white"/>
                    </svg>
                </div>
            </a>

            <a href="#" class="card">
                <div class="absolute z-[-1] h-full w-full -left-10 top-4">
                    <Image src="/img/illu/card-illu-3.svg" alt="" />
                </div>
                <div class="card__overlay">
                    <h2 class="font-montserrat font-black h-[2em] tracking-2 text-2xl mb-4">Installation & Maintenance</h2>
                    <p class="font-medium leading-snug text-lg">La pose et l’entretien de votre borne</p>
                    <svg class="absolute bottom-4 right-4" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.7241 9.04262C15.1241 8.66175 15.1396 8.02877 14.7587 7.62883L8.55205 1.11133C8.17118 0.711383 7.53821 0.695919 7.13826 1.07679C6.73831 1.45766 6.72285 2.09063 7.10372 2.49058L12.6207 8.28391L6.82739 13.8009C6.42745 14.1818 6.41198 14.8148 6.79285 15.2147C7.17372 15.6147 7.8067 15.6301 8.20664 15.2492L14.7241 9.04262ZM0.975576 8.9997L14.0101 9.31815L14.0589 7.31875L1.02442 7.0003L0.975576 8.9997Z" fill="white"/>
                    </svg>
                </div>
            </a>

            <a href="#" class="card">
                <div class="absolute z-[-1] h-full w-full -left-15 top-4">
                    <Image src="/img/illu/card-illu-4.svg" alt="" />
                </div>
                <div class="card__overlay">
                    <h2 class="font-montserrat font-black h-[2em] tracking-2 text-2xl mb-4">Nos produits</h2>
                    <p class="font-medium leading-snug text-lg">Découvrez notre sélection des meilleurs produits sur le marché</p>
                    <svg class="absolute bottom-4 right-4" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.7241 9.04262C15.1241 8.66175 15.1396 8.02877 14.7587 7.62883L8.55205 1.11133C8.17118 0.711383 7.53821 0.695919 7.13826 1.07679C6.73831 1.45766 6.72285 2.09063 7.10372 2.49058L12.6207 8.28391L6.82739 13.8009C6.42745 14.1818 6.41198 14.8148 6.79285 15.2147C7.17372 15.6147 7.8067 15.6301 8.20664 15.2492L14.7241 9.04262ZM0.975576 8.9997L14.0101 9.31815L14.0589 7.31875L1.02442 7.0003L0.975576 8.9997Z" fill="white"/>
                    </svg>
                </div>
            </a>

            <a href="#" class="card">
                <div class="absolute z-[-1] h-full w-1/2 -left-5 top-4">
                    <Image src="/img/illu/card-illu-5.svg" alt="" />
                </div>
                <div class="card__overlay">
                    <h2 class="font-montserrat font-black h-[2em] tracking-2 text-2xl mb-4">Technique</h2>
                    <p class="font-medium leading-snug text-lg">Le saviez vous ?</p>
                    <svg class="absolute bottom-4 right-4" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.7241 9.04262C15.1241 8.66175 15.1396 8.02877 14.7587 7.62883L8.55205 1.11133C8.17118 0.711383 7.53821 0.695919 7.13826 1.07679C6.73831 1.45766 6.72285 2.09063 7.10372 2.49058L12.6207 8.28391L6.82739 13.8009C6.42745 14.1818 6.41198 14.8148 6.79285 15.2147C7.17372 15.6147 7.8067 15.6301 8.20664 15.2492L14.7241 9.04262ZM0.975576 8.9997L14.0101 9.31815L14.0589 7.31875L1.02442 7.0003L0.975576 8.9997Z" fill="white"/>
                    </svg>
                </div>
            </a>

            <a href="#" class="card">
                <div class="absolute z-[-1] h-full w-1/2 inset-x-auto top-4 ">
                    <Image src="/img/illu/card-illu-6.svg" alt="" />
                </div>
                <div class="card__overlay">
                    <h2 class="font-montserrat font-black h-[2em] tracking-2 text-2xl mb-4">Preezeo</h2>
                    <p class="font-medium leading-snug text-lg">Qui sommes nous ?</p>
                    <svg class="absolute bottom-4 right-4" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.7241 9.04262C15.1241 8.66175 15.1396 8.02877 14.7587 7.62883L8.55205 1.11133C8.17118 0.711383 7.53821 0.695919 7.13826 1.07679C6.73831 1.45766 6.72285 2.09063 7.10372 2.49058L12.6207 8.28391L6.82739 13.8009C6.42745 14.1818 6.41198 14.8148 6.79285 15.2147C7.17372 15.6147 7.8067 15.6301 8.20664 15.2492L14.7241 9.04262ZM0.975576 8.9997L14.0101 9.31815L14.0589 7.31875L1.02442 7.0003L0.975576 8.9997Z" fill="white"/>
                    </svg>
                </div>
            </a>
        </div>
    </section>

    <section class="container max-md:px-[5%]">
        <h2 class="paragraphe max-w-[800px] mx-auto">
            <span class="text-purple">Preezeo</span> forme de manière régulière ses techniciens. 
            Nous favorisons des produits <span class="text-purple">fabriqués en France</span> qui peuvent être évolutifs. <br>
            <span class="text-purple">Spécialiste</span> de l’installation des bornes de recharge pour véhicules électriques.
        </h2>
    </section>


    <section class="container max-md:px-[5%]">
        <div class="flex items-stretch gap-10 mx-auto w-fit mb-6 lg:mb-16">
            {contentType.map((item) => (
                <button type="button" data-toggle-product-type={item.value} class="secondary-button">{ item.text }</button>
            ))}
        </div>

        {contentType.map((item) => (
            <article 
                class="flex gap-3 items-center relative flex-col w-full lg:flex-row hidden"
                data-product-type-value={item.value}
            >
                <div class="flex items-stretch justify-between w-full max-md:flex-col gap-12">
                    <p class="text-lg max-w-[500px] md:flex-1 md:w-1/2 max-md:w-full" set:html={item.content}></p>

                    <div class="hero-animation-container max-w-[600px] md:flex-1 md:w-1/2 max-md:w-full">
                        <Image 
                            c="hero-animation hero-first lg:h-[300px]"
                            src={item.illustrations[0]}                            
                            alt=""
                            fetchPriority={true}
                        />
                        <Image 
                            c="hero-animation hero-second lg:h-[300px]"
                            src={item.illustrations[1]}
                            alt=""
                            fetchPriority={true}
                        />
                        <Image 
                            c="hero-animation hero-second lg:h-[300px]"
                            src={item.illustrations[2]}
                            alt=""
                            fetchPriority={true}
                        />
                    </div>
                </div>
            </article>
        ))}

    </section>


    <section class="relative my-[10vw]">
        <div class="absolute z-[-1] w-full -top-[33%]">
            <Image src="/img/illu/section.svg" alt="" cover={true} c="max-w-unset max-h-unset w-full h-full" />
        </div>

        <div class="flex flex-col w-full max-w-[800px] mx-auto max-md:px-[5%]">
            <article class="w-full flex flex-col items-center justify-center gap-5 p-6 lg:p-10 rounded-lg bg-home-cards border border-blue  backdrop-blur-xl">
                <h2 class="text-yellow font-black text-xl">Offre de parrainage</h2>
                <p class="paragraphe">
                    Profitez de notre offre de parrainage exclusive chez <span class="text-purple">Preezeo</span> ! Parrainez un ami ou un proche pour <span class="text-yellow">l'installation d'une borne de recharge électrique</span>, et bénéficiez chacun d'une remise sur nos services. 
                    <br>
                    <br>
                    Partagez les avantages de la <span class="text-yellow">mobilité électrique</span> tout en économisant sur votre installation.
                    <br>
                    <br>
                    <span class="text-yellow">Rejoignez-nous dès aujourd'hui</span> pour promouvoir une mobilité plus verte et obtenir des réductions pour vous et vos proches.  
                </p>
            </article>

            <ButtonContact c="justify-self-end ml-auto mt-4" />
        </div>

    </section>


    <section class="container max-md:px-[5%]">
        <div class="lg:grid grid-cols-5 gap-8 scrollbar-hide max-md:flex max-md:overflow-y-clip max-md:overflow-x-scroll">
            <div class="min-w-[150px] max-h-[150px] max-w-[220px]">
                <Image src="/img/illu/avere.png" alt="" />
            </div>
            <div class="min-w-[150px] max-h-[150px] max-w-[220px]">
                <Image src="/img/illu/advenir.png" alt="" />
            </div>
            <div class="min-w-[150px] max-h-[150px] max-w-[220px]">
                <Image src="/img/illu/qualifelec.png" alt="" />
            </div>
            <div class="min-w-[150px] max-h-[150px] max-w-[220px]">
                <Image src="/img/illu/evready.png" alt="" />
            </div>
            <div class="min-w-[150px] max-h-[150px] max-w-[220px]">
                <Image src="/img/illu/irve.png" alt="" />
            </div>
            
        </div>
    </section>
</Layout>

<style lang="scss" is:global>
@use '../styles/_variables.scss' as *;


.hero-animation-container {
    position: relative;

    .hero-animation {
        position: absolute;
        top: 50%;
        left: 50%;
        translate: -50% -50%;
        z-index: 1;
        width: 100%;
        height: auto;
        max-width: 100%;
        max-height: none;
        object-position: center;
        transform-box: center;
        transform-origin: center;
        will-change: opacity;

        @keyframes swapOne {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }

        @keyframes swapTwo {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }

        &.hero-first {
            animation: swapOne 1s ease-in-out .5s infinite alternate;
        }    
        
        &.hero-second {
            animation: swapTwo 1s ease-in-out .5s infinite alternate;
        }
    
    }
}


.secondary-button {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 26px;
    padding: 10px 20px;
    border-radius: 5px;
    border: solid 2px var(--purple);
    background: transparent;

    &:not(.active):hover {
        color: var(--purple);
        border: dashed 2px var(--purple);
    }

    &.active {
        border: solid 2px var(--purple);
        background: var(--purple);
        color: var(--white);
        pointer-events: none;
        cursor: default;
    }
}
.card-scroller {
    scroll-padding: 0 5%;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    mask: linear-gradient(90deg, transparent, white 5%, white 90%, transparent);

    &::-webkit-scrollbar {
        background: transparent;
        height: 10px;
        border-radius: 99px;
        cursor: grab;
    }
    &::-webkit-scrollbar-thumb {
       background: var(--blue);
       border-radius: 99px;
       cursor: grab;
    }

    &::-webkit-scrollbar-track {
        margin-left: 25vw;
        margin-right: 25vw;
        background: var(--metal);
        border-radius: 99px;
        cursor: grab;
    }
}
.card {
    @apply relative overflow-clip min-w-[80%] md:min-w-[400px] bg-home-cards border border-blue rounded-lg snap-start;
    min-height: 250px;
    --transition: .75s ease;

    @media screen and (min-width: 768px) {
        min-height: 340px;
    }
    &:hover {
       img {
            scale: 1.125;
            transition: var(--transition);
       }

       .card__overlay svg {
            translate: 5px 0;
            path {
                fill: var(--yellow);
            }
       }
    }

    .card__overlay svg {
        transition: var(--transition);
    }

    img {
        will-change: scale;
        transform-origin: center center;
        transform-box: fill-box;
        transition: .5s ease;
    }

    &__overlay {
        @apply flex flex-col justify-center absolute w-[230px] h-full right-6 top-0 px-4 bg-white/5 backdrop-blur-xl;
    }
}

.paragraphe {
    @apply text-xl lg:text-2xl font-semibold leading-relaxed 
}


</style>
